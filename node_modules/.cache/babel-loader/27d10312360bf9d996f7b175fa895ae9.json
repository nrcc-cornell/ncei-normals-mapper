{"ast":null,"code":"const dateDiff = (date1, date2) => {\n  const sdate = date1 instanceof Date ? date1 : new Date(date1);\n  const edate = date2 instanceof Date ? date2 : new Date(date2);\n  const one_day = 1000 * 60 * 60 * 24;\n  return Math.round((edate.getTime() - sdate.getTime()) / one_day);\n};\n\nconst buildParams = input_params => {\n  const paramsToSubmit = {\n    grid: input_params.grid,\n    output: input_params.output\n  }; //console.log(input_params) // for debugging\n  // For \"interval\" date selection, calculate duration based on sdate and edate. Also send just date instead of sdate and edate.\n\n  var duration;\n\n  if (input_params.elems[0].duration === 1) {\n    duration = 1;\n  } else if (input_params.sdate <= input_params.edate) {\n    duration = dateDiff(input_params.sdate, input_params.edate) + 1;\n  } else {\n    // dates wrap around year border\n    const newStart = new Date(input_params.sdate);\n    newStart.setFullYear(2018);\n    duration = dateDiff(newStart, input_params.edate) + 1;\n  }\n\n  const newElems = input_params.elems;\n  newElems[0] = { ...newElems[0],\n    duration\n  };\n  paramsToSubmit.elems = newElems;\n  const newDate = input_params.elems[0].interval.length === 2 ? input_params.edate.slice(0, 7) : input_params.edate;\n  paramsToSubmit.date = newDate; // areaType and stateType are used to determine whether to send \"state\" or \"bbox\".\n\n  paramsToSubmit = { ...paramsToSubmit,\n    ...input_params.areaDef\n  };\n\n  if (input_params.areaType === \"region\" || input_params.areaType === \"state\" && input_params.stateType === \"all\") {\n    paramsToSubmit.state = input_params.state;\n  } else {\n    paramsToSubmit.bbox = input_params.bbox && input_params.bbox.length === 4 ? input_params.bbox.join(\",\") : \"\";\n  }\n\n  return JSON.stringify(paramsToSubmit);\n};\n\nexport { buildParams };","map":{"version":3,"sources":["/Users/kle1/progs/React/normals-viewer/src/utilities/utils.js"],"names":["dateDiff","date1","date2","sdate","Date","edate","one_day","Math","round","getTime","buildParams","input_params","paramsToSubmit","grid","output","duration","elems","newStart","setFullYear","newElems","newDate","interval","length","slice","date","areaDef","areaType","stateType","state","bbox","join","JSON","stringify"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAClC,QAAMC,KAAK,GAAGF,KAAK,YAAYG,IAAjB,GAAwBH,KAAxB,GAAgC,IAAIG,IAAJ,CAASH,KAAT,CAA9C;AACA,QAAMI,KAAK,GAAGH,KAAK,YAAYE,IAAjB,GAAwBF,KAAxB,GAAgC,IAAIE,IAAJ,CAASF,KAAT,CAA9C;AACA,QAAMI,OAAO,GAAG,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjC;AACA,SAAQC,IAAI,CAACC,KAAL,CAAW,CAACH,KAAK,CAACI,OAAN,KAAkBN,KAAK,CAACM,OAAN,EAAnB,IAAsCH,OAAjD,CAAR;AACA,CALD;;AAOA,MAAMI,WAAW,GAAIC,YAAD,IAAkB;AACrC,QAAMC,cAAc,GAAG;AAACC,IAAAA,IAAI,EAAEF,YAAY,CAACE,IAApB;AAA0BC,IAAAA,MAAM,EAAEH,YAAY,CAACG;AAA/C,GAAvB,CADqC,CAErC;AACA;;AACA,MAAIC,QAAJ;;AACA,MAAIJ,YAAY,CAACK,KAAb,CAAmB,CAAnB,EAAsBD,QAAtB,KAAmC,CAAvC,EAA0C;AACzCA,IAAAA,QAAQ,GAAG,CAAX;AACA,GAFD,MAEO,IAAIJ,YAAY,CAACR,KAAb,IAAsBQ,YAAY,CAACN,KAAvC,EAA8C;AACpDU,IAAAA,QAAQ,GAAIf,QAAQ,CAACW,YAAY,CAACR,KAAd,EAAqBQ,YAAY,CAACN,KAAlC,CAAR,GAAmD,CAA/D;AACA,GAFM,MAEA;AACN;AACA,UAAMY,QAAQ,GAAG,IAAIb,IAAJ,CAASO,YAAY,CAACR,KAAtB,CAAjB;AACAc,IAAAA,QAAQ,CAACC,WAAT,CAAqB,IAArB;AACAH,IAAAA,QAAQ,GAAGf,QAAQ,CAACiB,QAAD,EAAWN,YAAY,CAACN,KAAxB,CAAR,GAAyC,CAApD;AACA;;AACD,QAAMc,QAAQ,GAAGR,YAAY,CAACK,KAA9B;AACAG,EAAAA,QAAQ,CAAC,CAAD,CAAR,GAAc,EAAC,GAAGA,QAAQ,CAAC,CAAD,CAAZ;AAAiBJ,IAAAA;AAAjB,GAAd;AACAH,EAAAA,cAAc,CAACI,KAAf,GAAuBG,QAAvB;AACA,QAAMC,OAAO,GAAGT,YAAY,CAACK,KAAb,CAAmB,CAAnB,EAAsBK,QAAtB,CAA+BC,MAA/B,KAA0C,CAA1C,GAA8CX,YAAY,CAACN,KAAb,CAAmBkB,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,CAA9C,GAA+EZ,YAAY,CAACN,KAA5G;AACAO,EAAAA,cAAc,CAACY,IAAf,GAAsBJ,OAAtB,CAnBqC,CAqBrC;;AACAR,EAAAA,cAAc,GAAG,EAAC,GAAGA,cAAJ;AAAoB,OAAGD,YAAY,CAACc;AAApC,GAAjB;;AACA,MAAId,YAAY,CAACe,QAAb,KAA0B,QAA1B,IAAuCf,YAAY,CAACe,QAAb,KAA0B,OAA1B,IAAqCf,YAAY,CAACgB,SAAb,KAA2B,KAA3G,EAAmH;AAClHf,IAAAA,cAAc,CAACgB,KAAf,GAAuBjB,YAAY,CAACiB,KAApC;AACA,GAFD,MAEO;AACNhB,IAAAA,cAAc,CAACiB,IAAf,GAAsBlB,YAAY,CAACkB,IAAb,IAAqBlB,YAAY,CAACkB,IAAb,CAAkBP,MAAlB,KAA6B,CAAlD,GAAsDX,YAAY,CAACkB,IAAb,CAAkBC,IAAlB,CAAuB,GAAvB,CAAtD,GAAoF,EAA1G;AACA;;AAED,SAAOC,IAAI,CAACC,SAAL,CAAepB,cAAf,CAAP;AACA,CA9BD;;AAgCA,SAASF,WAAT","sourcesContent":["const dateDiff = (date1, date2) => {\n\tconst sdate = date1 instanceof Date ? date1 : new Date(date1);\n\tconst edate = date2 instanceof Date ? date2 : new Date(date2);\n\tconst one_day = 1000 * 60 * 60 * 24;\n\treturn (Math.round((edate.getTime() - sdate.getTime()) / one_day));\n};\n\t\nconst buildParams = (input_params) => {\n\tconst paramsToSubmit = {grid: input_params.grid, output: input_params.output};\n\t//console.log(input_params) // for debugging\n\t// For \"interval\" date selection, calculate duration based on sdate and edate. Also send just date instead of sdate and edate.\n\tvar duration;\n\tif (input_params.elems[0].duration === 1) {\n\t\tduration = 1;\n\t} else if (input_params.sdate <= input_params.edate) {\n\t\tduration =  dateDiff(input_params.sdate, input_params.edate) + 1;\n\t} else {\n\t\t// dates wrap around year border\n\t\tconst newStart = new Date(input_params.sdate);\n\t\tnewStart.setFullYear(2018);\n\t\tduration = dateDiff(newStart, input_params.edate) + 1;\n\t}\n\tconst newElems = input_params.elems;\n\tnewElems[0] = {...newElems[0], duration};\n\tparamsToSubmit.elems = newElems;\n\tconst newDate = input_params.elems[0].interval.length === 2 ? input_params.edate.slice(0, 7) : input_params.edate;\n\tparamsToSubmit.date = newDate;\n\n\t// areaType and stateType are used to determine whether to send \"state\" or \"bbox\".\n\tparamsToSubmit = {...paramsToSubmit, ...input_params.areaDef};\n\tif (input_params.areaType === \"region\" || (input_params.areaType === \"state\" && input_params.stateType === \"all\")) {\n\t\tparamsToSubmit.state = input_params.state;\n\t} else {\n\t\tparamsToSubmit.bbox = input_params.bbox && input_params.bbox.length === 4 ? input_params.bbox.join(\",\") : \"\";\n\t}\n\n\treturn JSON.stringify(paramsToSubmit);\t\n};\n\nexport { buildParams };"]},"metadata":{},"sourceType":"module"}