{"ast":null,"code":"import _slicedToArray from\"/Users/keith/git/ncei-normals-mapper/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{MapContainer,TileLayer,Polygon,ImageOverlay,AttributionControl}from'react-leaflet';import{makeStyles}from'@mui/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{nav:{position:\"absolute\",top:0,left:0,padding:\"3px\"},mapContainer:{border:\"1pt solid midnightblue\",height:window.innerHeight*0.6},rangeControl:{color:\"midnightblue\",paddingLeft:\"0.5em\"}};});var LeafletMap=function LeafletMap(props){var imgsrc=props.imgsrc,dataBbox=props.dataBbox,range=props.range;var _useState=useState(),_useState2=_slicedToArray(_useState,2),bbox=_useState2[0],setBbox=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),imgcoords=_useState4[0],setImgcoords=_useState4[1];var classes=useStyles();useEffect(function(){if(dataBbox){// setup bounding box (bounds)\nsetBbox([parseFloat(dataBbox[0][0]),parseFloat(dataBbox[0][1]),parseFloat(dataBbox[1][0]),parseFloat(dataBbox[1][1])]);// convert bbox to Leaflet coordinates (rectangle around image)\nsetImgcoords([[dataBbox[1][1],dataBbox[0][0]],[dataBbox[1][1],dataBbox[1][0]],[dataBbox[0][1],dataBbox[1][0]],[dataBbox[0][1],dataBbox[0][0]]]);}},[dataBbox]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.mapContainer,children:bbox&&/*#__PURE__*/_jsxs(MapContainer,{bounds:[[bbox[1],bbox[0]],[bbox[3],bbox[2]]],zoomControl:true,scrollWheelZoom:true,attributionControl:false,children:[/*#__PURE__*/_jsx(AttributionControl,{position:\"bottomright\",prefix:\"<a href='https://leafletjs.com'>Leaflet</a>\"}),/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors \\xA9 <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\"}),imgcoords&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Polygon,{pathOptions:{color:\"lightgray\",weight:1,fill:false},positions:imgcoords}),/*#__PURE__*/_jsx(\"div\",{className:\"leaflet-bottom leaflet-left\",children:/*#__PURE__*/_jsxs(\"span\",{className:classes.rangeControl,children:[\"Range: \",range[0].toFixed(2),\" to \",range[1].toFixed(2)]})})]}),imgcoords&&imgsrc&&/*#__PURE__*/_jsx(ImageOverlay,{url:imgsrc,bounds:imgcoords,opacity:0.8,zIndex:10})]})})});};export default LeafletMap;","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Polygon","ImageOverlay","AttributionControl","makeStyles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useStyles","theme","nav","position","top","left","padding","mapContainer","border","height","window","innerHeight","rangeControl","color","paddingLeft","LeafletMap","props","imgsrc","dataBbox","range","_useState","_useState2","_slicedToArray","bbox","setBbox","_useState3","_useState4","imgcoords","setImgcoords","classes","parseFloat","children","className","bounds","zoomControl","scrollWheelZoom","attributionControl","prefix","url","attribution","pathOptions","weight","fill","positions","toFixed","opacity","zIndex"],"sources":["/Users/keith/git/ncei-normals-mapper/src/components/LeafletMap.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Polygon, ImageOverlay, AttributionControl } from 'react-leaflet';\nimport { makeStyles } from '@mui/styles';\n\nconst useStyles = makeStyles((theme) => ({\n\tnav: {\n\t\tposition: \"absolute\",\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tpadding: \"3px\",\n\t},\n\tmapContainer: {\n\t\tborder: \"1pt solid midnightblue\",\n\t\theight: window.innerHeight * 0.6,\n\t},\n\trangeControl: {\n\t\tcolor: \"midnightblue\",\n\t\tpaddingLeft: \"0.5em\",\n\t},\n}));\n\nconst LeafletMap = (props) => {\n\tconst { imgsrc, dataBbox, range } = props;\n\tconst [ bbox, setBbox ] = useState();\n\tconst [ imgcoords, setImgcoords ] = useState();\n\tconst classes = useStyles();\n\n\tuseEffect(() => {\n\t\tif (dataBbox) {\n\t\t\t// setup bounding box (bounds)\n\t\t\tsetBbox([parseFloat(dataBbox[0][0]),parseFloat(dataBbox[0][1]),parseFloat(dataBbox[1][0]),parseFloat(dataBbox[1][1])]);\n\t\t\t// convert bbox to Leaflet coordinates (rectangle around image)\n\t\t\tsetImgcoords([ [dataBbox[1][1],dataBbox[0][0]], [dataBbox[1][1],dataBbox[1][0]], [dataBbox[0][1],dataBbox[1][0]], [dataBbox[0][1],dataBbox[0][0]] ]);\n\t\t}\n\t}, [dataBbox]);\n\n\n\treturn (\n\t\t<>\n\t\t\t<div className={classes.mapContainer}>\n\t\t\t\t{bbox && \n\t\t\t\t\t<MapContainer \n\t\t\t\t\t\tbounds={[[bbox[1], bbox[0]], [bbox[3], bbox[2]]]}\n\t\t\t\t\t\tzoomControl={true}\n\t\t\t\t\t\tscrollWheelZoom={true}\n\t\t\t\t\t\tattributionControl={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AttributionControl position=\"bottomright\" prefix={\"<a href='https://leafletjs.com'>Leaflet</a>\"} />\n\n\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\turl='https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png'\n\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{imgcoords &&\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Polygon \n\t\t\t\t\t\t\t\t\tpathOptions={{color:\"lightgray\", weight:1, fill:false}}\n\t\t\t\t\t\t\t\t\tpositions={imgcoords} \n\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t<div className='leaflet-bottom leaflet-left'>\n\t\t\t\t\t\t\t\t\t<span className={classes.rangeControl}>Range: {range[0].toFixed(2)} to {range[1].toFixed(2)}</span>\n    \t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{imgcoords && imgsrc &&\n\t\t\t\t\t\t\t<ImageOverlay\n\t\t\t\t\t\t\t\turl={imgsrc}\n\t\t\t\t\t\t\t\tbounds={imgcoords}\n\t\t\t\t\t\t\t\topacity={0.8}\n\t\t\t\t\t\t\t\tzIndex={10}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t</MapContainer>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default LeafletMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}