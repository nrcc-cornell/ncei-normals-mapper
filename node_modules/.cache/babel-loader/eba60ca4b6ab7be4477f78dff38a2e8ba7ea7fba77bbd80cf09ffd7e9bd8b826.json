{"ast":null,"code":"import _slicedToArray from\"/Users/keith/progs/React/ncei-normals-mapper/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import TextField from'@mui/material/TextField';import Typography from'@mui/material/Typography';import Stack from'@mui/material/Stack';import MenuItem from'@mui/material/MenuItem';import dayjs from'dayjs';import{makeStyles}from'@mui/styles';import{monthAbbs}from'../utilities/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{container:{border:\"1px solid lightgray\",padding:\"1em\",display:\"inline-block\"},dateSeperator:{lineHeight:\"2em\",margin:\"0.25em 0.5em 0.25em\"},menuitem:{minHeight:\"auto\",paddingTop:\"1px\"}};});export default function DateFilter(props){var updateInputParams=props.updateInputParams;var classes=useStyles();var _useState=useState('01'),_useState2=_slicedToArray(_useState,2),smonth=_useState2[0],setSmonth=_useState2[1];var _useState3=useState('12'),_useState4=_slicedToArray(_useState3,2),emonth=_useState4[0],setEmonth=_useState4[1];var _useState5=useState('01'),_useState6=_slicedToArray(_useState5,2),sday=_useState6[0],setSday=_useState6[1];var _useState7=useState('31'),_useState8=_slicedToArray(_useState7,2),eday=_useState8[0],setEday=_useState8[1];var updateDate=function updateDate(whichdate,tmon,tday){var newdate=[\"1991\",tmon,tday].join(\"-\");if(whichdate===\"start\"){updateInputParams({sdate:newdate});}else{updateInputParams({edate:newdate});}};var days_in_month=function days_in_month(month){// number of days in month (non-leap year)\nreturn dayjs('2023-'+month+'-01').daysInMonth();};var selectMonthOptions=function selectMonthOptions(choices){return choices.map(function(option){return/*#__PURE__*/_jsx(MenuItem,{dense:true,className:classes.menuitem,sx:{pt:0,pb:0},value:option.value,children:option.label},option.value);});};var selectDayOptions=function selectDayOptions(month){var dim=days_in_month(month);var dayChoices=Array.from({length:dim},function(v,k){return(k+1).toString().padStart(2,'0');});return dayChoices.map(function(option){return/*#__PURE__*/_jsx(MenuItem,{dense:true,className:classes.menuitem,sx:{pt:0,pb:0},value:option,children:option},option);});};var handleChange=function handleChange(event){var name=event.target.name;var value=event.target.value;var dim_new_month,correctDay=null;switch(name){case'smonth':dim_new_month=days_in_month(value);if(parseInt(sday)>dim_new_month){correctDay=dim_new_month.toString().padStart(2,'0');setSday(correctDay);}setSmonth(value);updateDate('start',value,correctDay||sday);break;case'emonth':dim_new_month=days_in_month(value);if(parseInt(eday)>dim_new_month){correctDay=dim_new_month.toString().padStart(2,'0');setEday(correctDay);}setEmonth(value);updateDate('end',value,correctDay||eday);break;case'sday':setSday(value);updateDate('start',smonth,value);break;case'eday':setEday(value);updateDate('end',emonth,value);break;default:console.log('Not month or day change');}};useEffect(function(){updateInputParams({sdate:[\"1991\",smonth,sday].join(\"-\"),edate:[\"1991\",emonth,eday].join(\"-\")});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:0,children:[/*#__PURE__*/_jsx(TextField,{size:\"small\",sx:{m:0},select:true,name:\"smonth\",value:smonth,onChange:handleChange,children:selectMonthOptions(monthAbbs)}),/*#__PURE__*/_jsx(TextField,{size:\"small\",sx:{m:0},select:true,name:\"sday\",value:sday,onChange:handleChange,children:selectDayOptions(smonth)}),/*#__PURE__*/_jsx(Typography,{className:classes.dateSeperator,children:\"-\"}),/*#__PURE__*/_jsx(TextField,{size:\"small\",sx:{m:0},select:true,name:\"emonth\",value:emonth,onChange:handleChange,children:selectMonthOptions(monthAbbs)}),/*#__PURE__*/_jsx(TextField,{size:\"small\",sx:{m:0},select:true,name:\"eday\",value:eday,onChange:handleChange,children:selectDayOptions(emonth)})]})});}","map":{"version":3,"names":["useEffect","useState","TextField","Typography","Stack","MenuItem","dayjs","makeStyles","monthAbbs","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","border","padding","display","dateSeperator","lineHeight","margin","menuitem","minHeight","paddingTop","DateFilter","props","updateInputParams","classes","_useState","_useState2","_slicedToArray","smonth","setSmonth","_useState3","_useState4","emonth","setEmonth","_useState5","_useState6","sday","setSday","_useState7","_useState8","eday","setEday","updateDate","whichdate","tmon","tday","newdate","join","sdate","edate","days_in_month","month","daysInMonth","selectMonthOptions","choices","map","option","dense","className","sx","pt","pb","value","children","label","selectDayOptions","dim","dayChoices","Array","from","length","v","k","toString","padStart","handleChange","event","name","target","dim_new_month","correctDay","parseInt","console","log","direction","spacing","size","m","select","onChange"],"sources":["/Users/keith/progs/React/ncei-normals-mapper/src/components/DateRange.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport TextField from '@mui/material/TextField';\nimport Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\nimport MenuItem from '@mui/material/MenuItem';\nimport dayjs from 'dayjs';\nimport { makeStyles } from '@mui/styles';\nimport { monthAbbs } from '../utilities/constants'\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    border: \"1px solid lightgray\", \n    padding: \"1em\", \n    display: \"inline-block\",\n  },\n\tdateSeperator: {\n\t\tlineHeight: \"2em\",\n\t\tmargin: \"0.25em 0.5em 0.25em\",\n\t},\n  menuitem: {\n    minHeight: \"auto\",\n    paddingTop: \"1px\",\n\t},\n}));\n\n\nexport default function DateFilter(props) {\n  const { updateInputParams } = props;\n  const classes = useStyles();\n  const [ smonth, setSmonth ] = useState('01');\n  const [ emonth, setEmonth ] = useState('12');\n  const [ sday, setSday ] = useState('01');\n  const [ eday, setEday ] = useState('31');\n\n  const updateDate = (whichdate, tmon, tday) => {\n\t\tconst newdate = [\"1991\", tmon, tday].join(\"-\");\n    if (whichdate === \"start\") {\n      updateInputParams({sdate:newdate})\n    } else {\n      updateInputParams({edate:newdate})\n    }\n\t};\n\n  const days_in_month = (month) => {\n    // number of days in month (non-leap year)\n    return dayjs('2023-' + month + '-01').daysInMonth()\n  }\n\n  const selectMonthOptions = (choices) => {\n    return (\n      choices.map(option => {\n        return (\n          <MenuItem \n            dense={true}\n            className={classes.menuitem}\n            sx={{ pt:0, pb:0 }}\n            key={option.value} \n            value={option.value}\n          >\n            {option.label}\n          </MenuItem>\n        )\n      })\n    )\n  }\n\n  const selectDayOptions = (month) => {\n    const dim = days_in_month(month)\n    const dayChoices = Array.from({length: dim}, (v, k) => (k+1).toString().padStart(2, '0'))\n    return (\n      dayChoices.map(option => {\n        return (\n          <MenuItem \n            dense={true}\n            className={classes.menuitem}\n            sx={{ pt:0, pb:0 }}\n            key={option} \n            value={option}\n          >\n            {option}\n          </MenuItem>\n        )\n      })\n    )\n  }\n\n  const handleChange = (event) => {\n\t\tconst name = event.target.name;\n\t\tconst value = event.target.value;\n    var dim_new_month, correctDay=null;\n    switch(name) {\n      case 'smonth':\n        dim_new_month = days_in_month(value)\n        if (parseInt(sday) > dim_new_month) {\n          correctDay = dim_new_month.toString().padStart(2, '0')\n          setSday(correctDay)\n        }\n        setSmonth(value);\n        updateDate('start', value, correctDay || sday)\n        break;\n      case 'emonth':\n        dim_new_month = days_in_month(value)\n        if (parseInt(eday) > dim_new_month) {\n          correctDay = dim_new_month.toString().padStart(2, '0')\n          setEday(correctDay)\n        }\n        setEmonth(value);\n        updateDate('end', value, correctDay || eday)\n        break;\n      case 'sday':\n        setSday(value);\n        updateDate('start', smonth, value)\n        break;\n      case 'eday':\n        setEday(value);\n        updateDate('end', emonth, value)\n        break;\n      default:\n        console.log('Not month or day change')\n    }\n\t}\n\n  useEffect(() => {\n\t\tupdateInputParams({\n      sdate:[\"1991\", smonth, sday].join(\"-\"), \n      edate:[\"1991\", emonth, eday].join(\"-\")\n    });\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\n  return (\n    <div className={classes.container}>\n      <Stack direction=\"row\" spacing={0}>\n        <TextField size=\"small\" sx={{ m:0 }}\n            select\n            name=\"smonth\"\n            value={smonth}\n            onChange={handleChange}\n        >\n            {selectMonthOptions(monthAbbs)}\n        </TextField>\n        <TextField size=\"small\" sx={{ m:0 }}\n            select\n            name=\"sday\"\n            value={sday}\n            onChange={handleChange}\n        >\n            {selectDayOptions(smonth)}\n        </TextField>\n\n        <Typography className={classes.dateSeperator}>\n\t\t\t\t\t\t-\n\t\t\t\t</Typography>\n        \n        <TextField size=\"small\" sx={{ m:0 }}\n            select\n            name=\"emonth\"\n            value={emonth}\n            onChange={handleChange}\n        >\n            {selectMonthOptions(monthAbbs)}\n        </TextField>\n        <TextField size=\"small\" sx={{ m:0 }}\n            select\n            name=\"eday\"\n            value={eday}\n            onChange={handleChange}\n        >\n            {selectDayOptions(emonth)}\n        </TextField>\n      </Stack>\n      </div>\n  )\n}\n"],"mappings":"kIAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CACvC,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,aAAa,CACxC,OAASC,SAAS,KAAQ,wBAAwB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElD,GAAM,CAAAC,SAAS,CAAGN,UAAU,CAAC,SAACO,KAAK,QAAM,CACvCC,SAAS,CAAE,CACTC,MAAM,CAAE,qBAAqB,CAC7BC,OAAO,CAAE,KAAK,CACdC,OAAO,CAAE,cACX,CAAC,CACFC,aAAa,CAAE,CACdC,UAAU,CAAE,KAAK,CACjBC,MAAM,CAAE,qBACT,CAAC,CACAC,QAAQ,CAAE,CACRC,SAAS,CAAE,MAAM,CACjBC,UAAU,CAAE,KACf,CACD,CAAC,EAAC,CAAC,CAGH,cAAe,SAAS,CAAAC,UAAUA,CAACC,KAAK,CAAE,CACxC,GAAQ,CAAAC,iBAAiB,CAAKD,KAAK,CAA3BC,iBAAiB,CACzB,GAAM,CAAAC,OAAO,CAAGf,SAAS,CAAC,CAAC,CAC3B,IAAAgB,SAAA,CAA8B5B,QAAQ,CAAC,IAAI,CAAC,CAAA6B,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACzB,IAAAI,UAAA,CAA8BjC,QAAQ,CAAC,IAAI,CAAC,CAAAkC,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAApCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACzB,IAAAG,UAAA,CAA0BrC,QAAQ,CAAC,IAAI,CAAC,CAAAsC,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAhCE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACrB,IAAAG,UAAA,CAA0BzC,QAAQ,CAAC,IAAI,CAAC,CAAA0C,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAhCE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IAErB,GAAM,CAAAG,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,SAAS,CAAEC,IAAI,CAAEC,IAAI,CAAK,CAC9C,GAAM,CAAAC,OAAO,CAAG,CAAC,MAAM,CAAEF,IAAI,CAAEC,IAAI,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC,CAC5C,GAAIJ,SAAS,GAAK,OAAO,CAAE,CACzBpB,iBAAiB,CAAC,CAACyB,KAAK,CAACF,OAAO,CAAC,CAAC,CACpC,CAAC,IAAM,CACLvB,iBAAiB,CAAC,CAAC0B,KAAK,CAACH,OAAO,CAAC,CAAC,CACpC,CACH,CAAC,CAEA,GAAM,CAAAI,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC/B;AACA,MAAO,CAAAjD,KAAK,CAAC,OAAO,CAAGiD,KAAK,CAAG,KAAK,CAAC,CAACC,WAAW,CAAC,CAAC,CACrD,CAAC,CAED,GAAM,CAAAC,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAIC,OAAO,CAAK,CACtC,MACE,CAAAA,OAAO,CAACC,GAAG,CAAC,SAAAC,MAAM,CAAI,CACpB,mBACElD,IAAA,CAACL,QAAQ,EACPwD,KAAK,CAAE,IAAK,CACZC,SAAS,CAAElC,OAAO,CAACN,QAAS,CAC5ByC,EAAE,CAAE,CAAEC,EAAE,CAAC,CAAC,CAAEC,EAAE,CAAC,CAAE,CAAE,CAEnBC,KAAK,CAAEN,MAAM,CAACM,KAAM,CAAAC,QAAA,CAEnBP,MAAM,CAACQ,KAAK,EAHRR,MAAM,CAACM,KAIJ,CAAC,CAEf,CAAC,CAAC,CAEN,CAAC,CAED,GAAM,CAAAG,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAId,KAAK,CAAK,CAClC,GAAM,CAAAe,GAAG,CAAGhB,aAAa,CAACC,KAAK,CAAC,CAChC,GAAM,CAAAgB,UAAU,CAAGC,KAAK,CAACC,IAAI,CAAC,CAACC,MAAM,CAAEJ,GAAG,CAAC,CAAE,SAACK,CAAC,CAAEC,CAAC,QAAK,CAACA,CAAC,CAAC,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,GAAC,CACzF,MACE,CAAAP,UAAU,CAACZ,GAAG,CAAC,SAAAC,MAAM,CAAI,CACvB,mBACElD,IAAA,CAACL,QAAQ,EACPwD,KAAK,CAAE,IAAK,CACZC,SAAS,CAAElC,OAAO,CAACN,QAAS,CAC5ByC,EAAE,CAAE,CAAEC,EAAE,CAAC,CAAC,CAAEC,EAAE,CAAC,CAAE,CAAE,CAEnBC,KAAK,CAAEN,MAAO,CAAAO,QAAA,CAEbP,MAAM,EAHFA,MAIG,CAAC,CAEf,CAAC,CAAC,CAEN,CAAC,CAED,GAAM,CAAAmB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAChC,GAAM,CAAAC,IAAI,CAAGD,KAAK,CAACE,MAAM,CAACD,IAAI,CAC9B,GAAM,CAAAf,KAAK,CAAGc,KAAK,CAACE,MAAM,CAAChB,KAAK,CAC9B,GAAI,CAAAiB,aAAa,CAAEC,UAAU,CAAC,IAAI,CAClC,OAAOH,IAAI,EACT,IAAK,QAAQ,CACXE,aAAa,CAAG7B,aAAa,CAACY,KAAK,CAAC,CACpC,GAAImB,QAAQ,CAAC7C,IAAI,CAAC,CAAG2C,aAAa,CAAE,CAClCC,UAAU,CAAGD,aAAa,CAACN,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACtDrC,OAAO,CAAC2C,UAAU,CAAC,CACrB,CACAnD,SAAS,CAACiC,KAAK,CAAC,CAChBpB,UAAU,CAAC,OAAO,CAAEoB,KAAK,CAAEkB,UAAU,EAAI5C,IAAI,CAAC,CAC9C,MACF,IAAK,QAAQ,CACX2C,aAAa,CAAG7B,aAAa,CAACY,KAAK,CAAC,CACpC,GAAImB,QAAQ,CAACzC,IAAI,CAAC,CAAGuC,aAAa,CAAE,CAClCC,UAAU,CAAGD,aAAa,CAACN,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACtDjC,OAAO,CAACuC,UAAU,CAAC,CACrB,CACA/C,SAAS,CAAC6B,KAAK,CAAC,CAChBpB,UAAU,CAAC,KAAK,CAAEoB,KAAK,CAAEkB,UAAU,EAAIxC,IAAI,CAAC,CAC5C,MACF,IAAK,MAAM,CACTH,OAAO,CAACyB,KAAK,CAAC,CACdpB,UAAU,CAAC,OAAO,CAAEd,MAAM,CAAEkC,KAAK,CAAC,CAClC,MACF,IAAK,MAAM,CACTrB,OAAO,CAACqB,KAAK,CAAC,CACdpB,UAAU,CAAC,KAAK,CAAEV,MAAM,CAAE8B,KAAK,CAAC,CAChC,MACF,QACEoB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CAC1C,CACH,CAAC,CAEAvF,SAAS,CAAC,UAAM,CAChB2B,iBAAiB,CAAC,CACdyB,KAAK,CAAC,CAAC,MAAM,CAAEpB,MAAM,CAAEQ,IAAI,CAAC,CAACW,IAAI,CAAC,GAAG,CAAC,CACtCE,KAAK,CAAC,CAAC,MAAM,CAAEjB,MAAM,CAAEQ,IAAI,CAAC,CAACO,IAAI,CAAC,GAAG,CACvC,CAAC,CAAC,CACJ;AACD,CAAC,CAAE,EAAE,CAAC,CAGL,mBACEzC,IAAA,QAAKoD,SAAS,CAAElC,OAAO,CAACb,SAAU,CAAAoD,QAAA,cAChCvD,KAAA,CAACR,KAAK,EAACoF,SAAS,CAAC,KAAK,CAACC,OAAO,CAAE,CAAE,CAAAtB,QAAA,eAChCzD,IAAA,CAACR,SAAS,EAACwF,IAAI,CAAC,OAAO,CAAC3B,EAAE,CAAE,CAAE4B,CAAC,CAAC,CAAE,CAAE,CAChCC,MAAM,MACNX,IAAI,CAAC,QAAQ,CACbf,KAAK,CAAElC,MAAO,CACd6D,QAAQ,CAAEd,YAAa,CAAAZ,QAAA,CAEtBV,kBAAkB,CAACjD,SAAS,CAAC,CACvB,CAAC,cACZE,IAAA,CAACR,SAAS,EAACwF,IAAI,CAAC,OAAO,CAAC3B,EAAE,CAAE,CAAE4B,CAAC,CAAC,CAAE,CAAE,CAChCC,MAAM,MACNX,IAAI,CAAC,MAAM,CACXf,KAAK,CAAE1B,IAAK,CACZqD,QAAQ,CAAEd,YAAa,CAAAZ,QAAA,CAEtBE,gBAAgB,CAACrC,MAAM,CAAC,CAClB,CAAC,cAEZtB,IAAA,CAACP,UAAU,EAAC2D,SAAS,CAAElC,OAAO,CAACT,aAAc,CAAAgD,QAAA,CAAC,GAElD,CAAY,CAAC,cAETzD,IAAA,CAACR,SAAS,EAACwF,IAAI,CAAC,OAAO,CAAC3B,EAAE,CAAE,CAAE4B,CAAC,CAAC,CAAE,CAAE,CAChCC,MAAM,MACNX,IAAI,CAAC,QAAQ,CACbf,KAAK,CAAE9B,MAAO,CACdyD,QAAQ,CAAEd,YAAa,CAAAZ,QAAA,CAEtBV,kBAAkB,CAACjD,SAAS,CAAC,CACvB,CAAC,cACZE,IAAA,CAACR,SAAS,EAACwF,IAAI,CAAC,OAAO,CAAC3B,EAAE,CAAE,CAAE4B,CAAC,CAAC,CAAE,CAAE,CAChCC,MAAM,MACNX,IAAI,CAAC,MAAM,CACXf,KAAK,CAAEtB,IAAK,CACZiD,QAAQ,CAAEd,YAAa,CAAAZ,QAAA,CAEtBE,gBAAgB,CAACjC,MAAM,CAAC,CAClB,CAAC,EACP,CAAC,CACH,CAAC,CAEZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}