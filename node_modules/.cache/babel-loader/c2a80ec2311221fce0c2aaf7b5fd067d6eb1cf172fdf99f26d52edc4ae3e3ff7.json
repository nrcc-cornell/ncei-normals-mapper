{"ast":null,"code":"import _objectSpread from\"/Users/keith/progs/React/ncei-normals-mapper/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/keith/progs/React/ncei-normals-mapper/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import dayjs from'dayjs';import{elements,maxbbox}from'../utilities/constants';//const dateDiff = (date1, date2) => {\n//\tconst sdate = date1 instanceof Date ? date1 : new Date(date1);\n//\tconst edate = date2 instanceof Date ? date2 : new Date(date2);\n//\tconst one_day = 1000 * 60 * 60 * 24;\n//\treturn (Math.round((edate.getTime() - sdate.getTime()) / one_day));\n//};\n// check bounding box \nvar checkBbox=function checkBbox(bbox){var newbbox=_toConsumableArray(bbox);if(bbox[0]<maxbbox.west){newbbox[0]=maxbbox.west;}if(bbox[1]<maxbbox.south){newbbox[1]=maxbbox.south;}if(bbox[2]>maxbbox.east){newbbox[2]=maxbbox.east;}if(bbox[3]>maxbbox.north){newbbox[3]=maxbbox.north;}return newbbox;};// check point \nvar checkLoc=function checkLoc(loc){var newloc=_toConsumableArray(loc);if(loc[0]<maxbbox.west){newloc[0]=maxbbox.west;}if(loc[1]<maxbbox.south){newloc[1]=maxbbox.south;}if(loc[0]>maxbbox.east){newloc[0]=maxbbox.east;}if(loc[1]>maxbbox.north){newloc[1]=maxbbox.north;}return newloc;};var buildParams=function buildParams(input_params){var duration,newElems;var paramsToSubmit={grid:input_params.grid,output:input_params.output};//console.log(input_params) // for debugging\nif(input_params.edate.length>7){// daily interval\nvar date1=dayjs(input_params.sdate);var date2=dayjs(input_params.edate);var hrdiff=date2.diff(date1,'hours');//difference in hours\nvar dydiff=Math.floor(hrdiff/24);// difference in days \nduration=dydiff+(dydiff>=0?1:366);newElems=[];if(input_params.elems[0].name!=='all'){newElems.push(_objectSpread(_objectSpread({},input_params.elems[0]),{},{interval:[0,0,1],duration:duration}));}else{['maxt','mint','avgt','pcpn'].forEach(function(elem,i){newElems.push({name:elem,interval:[0,0,1],duration:duration,reduce:elements[i].reduce});});}}else if(input_params.edate===input_params.sdate){// single month duration is 1\nnewElems=[];if(input_params.elems[0].name!=='all'){newElems.push(_objectSpread(_objectSpread({},input_params.elems[0]),{},{interval:[0,1],duration:1}));}else{['maxt','mint','avgt','pcpn'].forEach(function(elem,i){newElems.push({name:elem,interval:[0,1],duration:1,reduce:elements[i].reduce});});}}else{// For \"season\" date selection, calculate duration based on sdate and edate. \nvar mndiff=parseInt(input_params.edate.split(\"-\")[1])-parseInt(input_params.sdate.split(\"-\")[1]);duration=mndiff+(mndiff>=0?1:13);// Set up nested elements\nvar origElem=input_params.elems[0];newElems=[{elem:origElem,interval:[0,1],duration:duration,reduce:origElem.reduce}];// Replicate nested elems for all variables, if requested for a single grid point\nif(origElem.name==='all'){var nestedElem=_objectSpread(_objectSpread({},newElems[0].elem),{},{name:'maxt',reduce:elements[0].reduce});newElems[0]=_objectSpread(_objectSpread({},newElems[0]),{},{elem:nestedElem,reduce:elements[0].reduce});['mint','avgt','pcpn'].forEach(function(elem,i){nestedElem=_objectSpread(_objectSpread({},newElems[0].elem),{},{name:elem,reduce:elements[i+1].reduce});newElems.push(_objectSpread(_objectSpread({},newElems[0]),{},{elem:nestedElem,reduce:elements[i+1].reduce}));});}}// Add  elems as modified above to paramenters object\nparamsToSubmit=_objectSpread(_objectSpread({},paramsToSubmit),{},{elems:newElems});// send just date instead of sdate and edate.\nvar newDate=paramsToSubmit.elems[0].interval.length===2?input_params.edate.slice(0,7):input_params.edate;paramsToSubmit.date=newDate;// areaDef is type (state, loc, bbox) and value of area of interest.\nif(input_params.areaDef.bbox){input_params.areaDef.bbox=input_params.areaDef.bbox.map(function(x){return parseFloat(x);});var newbbox=checkBbox(input_params.areaDef.bbox);paramsToSubmit=_objectSpread(_objectSpread({},paramsToSubmit),{},{bbox:newbbox});//console.log(input_params.areaDef.bbox)\n}else if(input_params.areaDef.loc){input_params.areaDef.loc=input_params.areaDef.loc.map(function(x){return parseFloat(x);});var newloc=checkLoc(input_params.areaDef.loc);paramsToSubmit=_objectSpread(_objectSpread({},paramsToSubmit),{},{loc:newloc});}else if(input_params.areaDef.state){paramsToSubmit=_objectSpread(_objectSpread({},paramsToSubmit),input_params.areaDef);}else{console.log(\"unknown areaDef\");}// point location can only be json\nif(paramsToSubmit.loc){paramsToSubmit=_objectSpread(_objectSpread({},paramsToSubmit),{},{output:\"json\"});}// added image object if png output\nif(paramsToSubmit.output==='png'){var newImage=_objectSpread({},input_params.image);// convert levels string (from Image Settings) to array\nif(input_params.image.levels&&typeof input_params.image.levels==='string'){var splitLevels=input_params.image.levels.split(\",\");var newLevels=splitLevels.map(function(x){return parseFloat(x);});newImage=_objectSpread(_objectSpread({},newImage),{},{levels:newLevels});}// leave off empty levels element\nif(input_params.image.hasOwnProperty('levels')&&(input_params.image.levels===\"\"||input_params.image.levels.length===0)){delete newImage.levels;delete newImage.cmap;}if(input_params.image.hasOwnProperty('cmap')&&input_params.image.cmap.length===0){delete newImage.cmap;}paramsToSubmit=_objectSpread(_objectSpread({},paramsToSubmit),{},{image:newImage});}return paramsToSubmit;};// download a retrieved png image\nvar downloadFile=function downloadFile(href,filename){var link=document.createElement('a');link.href=href;link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);};// retrieve and download a geotiff or json file\nvar downloadFetch=function downloadFetch(jsonparams,filename,output){if(output==='json'){delete jsonparams.image;}var submitParams=JSON.stringify(_objectSpread(_objectSpread({},jsonparams),{},{output:output,meta:\"ll\"}));fetch(\"https://grid2.rcc-acis.org/GridData\",{body:submitParams,method:\"POST\",headers:{'Content-Type':'application/json'}}).then(function(response){if(!response.ok){console.log(\"Error fetching the results\");return;}return output==='json'?response.json():response.blob();}).then(function(response){var blob;if(output==='json'){var json=JSON.stringify(response);blob=new Blob([json],{type:'application/json'});}else{blob=response;}var href=window.URL.createObjectURL(blob);downloadFile(href,filename);}).catch(function(err){if(err.message.includes(\"Failed to execute 'createObjectURL' on 'URL'\")){console.log(\"Invalid grid request - \"+jsonparams);}else{console.log(err.message);};});};export{buildParams,checkBbox,downloadFile,downloadFetch};","map":{"version":3,"names":["dayjs","elements","maxbbox","checkBbox","bbox","newbbox","_toConsumableArray","west","south","east","north","checkLoc","loc","newloc","buildParams","input_params","duration","newElems","paramsToSubmit","grid","output","edate","length","date1","sdate","date2","hrdiff","diff","dydiff","Math","floor","elems","name","push","_objectSpread","interval","forEach","elem","i","reduce","mndiff","parseInt","split","origElem","nestedElem","newDate","slice","date","areaDef","map","x","parseFloat","state","console","log","newImage","image","levels","splitLevels","newLevels","hasOwnProperty","cmap","downloadFile","href","filename","link","document","createElement","download","body","appendChild","click","removeChild","downloadFetch","jsonparams","submitParams","JSON","stringify","meta","fetch","method","headers","then","response","ok","json","blob","Blob","type","window","URL","createObjectURL","catch","err","message","includes"],"sources":["/Users/keith/progs/React/ncei-normals-mapper/src/utilities/utils.js"],"sourcesContent":["import dayjs from 'dayjs';\nimport { elements, maxbbox } from '../utilities/constants';\n\n//const dateDiff = (date1, date2) => {\n//\tconst sdate = date1 instanceof Date ? date1 : new Date(date1);\n//\tconst edate = date2 instanceof Date ? date2 : new Date(date2);\n//\tconst one_day = 1000 * 60 * 60 * 24;\n//\treturn (Math.round((edate.getTime() - sdate.getTime()) / one_day));\n//};\n\n// check bounding box \nconst checkBbox = bbox => {\n\tconst newbbox = [...bbox]\n\tif (bbox[0] < maxbbox.west) {\n\t\tnewbbox[0] = maxbbox.west;\n\t}\n\tif (bbox[1] < maxbbox.south) {\n\t\tnewbbox[1] = maxbbox.south;\n\t}\n\tif (bbox[2] > maxbbox.east) {\n\t\tnewbbox[2] = maxbbox.east;\n\t}\n\tif (bbox[3] > maxbbox.north) {\n\t\tnewbbox[3] = maxbbox.north;\n\t}\n\treturn newbbox;\n};\n\n// check point \nconst checkLoc = loc => {\n\tconst newloc = [...loc]\n\tif (loc[0] < maxbbox.west) {\n\t\tnewloc[0] = maxbbox.west;\n\t}\n\tif (loc[1] < maxbbox.south) {\n\t\tnewloc[1] = maxbbox.south;\n\t}\n\tif (loc[0] > maxbbox.east) {\n\t\tnewloc[0] = maxbbox.east;\n\t}\n\tif (loc[1] > maxbbox.north) {\n\t\tnewloc[1] = maxbbox.north;\n\t}\n\treturn newloc;\n};\n\nconst buildParams = (input_params) => {\n\tvar duration, newElems;\n\tlet paramsToSubmit = {grid: input_params.grid, output: input_params.output};\n\t//console.log(input_params) // for debugging\n\n\tif (input_params.edate.length > 7) {\n\t\t// daily interval\n\t\tconst date1 = dayjs(input_params.sdate);\n\t\tconst date2 = dayjs(input_params.edate);\n\t\tconst hrdiff = date2.diff(date1, 'hours');\t//difference in hours\n\t\tconst dydiff = Math.floor(hrdiff / 24);\t\t// difference in days \n\t\tduration = dydiff + (dydiff >= 0 ? 1 : 366)\n\t\tnewElems = []\n\t\tif (input_params.elems[0].name !== 'all') {\n\t\t\tnewElems.push({...input_params.elems[0], interval:[0,0,1], duration: duration})\n\t\t} else {\n\t\t\t['maxt','mint','avgt','pcpn'].forEach((elem,i) => {\n\t\t\t\tnewElems.push({name: elem, interval: [0,0,1], duration: duration, reduce: elements[i].reduce});\n\t\t\t});\n\t\t}\n\t} else if (input_params.edate === input_params.sdate) {\n\t\t// single month duration is 1\n\t\tnewElems = []\n\t\tif (input_params.elems[0].name !== 'all') {\n\t\t\tnewElems.push({...input_params.elems[0], interval:[0,1], duration: 1})\n\t\t} else {\n\t\t\t['maxt','mint','avgt','pcpn'].forEach((elem,i) => {\n\t\t\t\tnewElems.push({name: elem, interval: [0,1], duration: 1, reduce: elements[i].reduce});\n\t\t\t});\n\t\t}\n\t} else {\n\t\t// For \"season\" date selection, calculate duration based on sdate and edate. \n\t\tconst mndiff = parseInt(input_params.edate.split(\"-\")[1]) - parseInt(input_params.sdate.split(\"-\")[1]);\n\t\tduration = mndiff + (mndiff >= 0 ? 1 : 13);\n\t\t// Set up nested elements\n\t\tconst origElem = input_params.elems[0];\n\t\tnewElems = [\n\t\t\t{\n\t\t\t\telem: origElem, \n\t\t\t\tinterval: [0,1], \n\t\t\t\tduration: duration, \n\t\t\t\treduce: origElem.reduce\n\t\t\t}\n\t\t];\n\t\t// Replicate nested elems for all variables, if requested for a single grid point\n\t\tif (origElem.name === 'all') {\n\t\t\tlet nestedElem = {...newElems[0].elem, name: 'maxt', reduce: elements[0].reduce};\n\t\t\tnewElems[0] = {...newElems[0], elem:nestedElem, reduce: elements[0].reduce};\n\t\t\t['mint','avgt','pcpn'].forEach((elem,i) => {\n\t\t\t\tnestedElem = {...newElems[0].elem, name: elem, reduce: elements[i+1].reduce};\n\t\t\t\tnewElems.push({...newElems[0], elem: nestedElem, reduce: elements[i+1].reduce});\n\t\t\t});\n\t\t}\n\t}\n\n\t// Add  elems as modified above to paramenters object\n\tparamsToSubmit = {...paramsToSubmit, elems: newElems}\n\n\t// send just date instead of sdate and edate.\n\tconst newDate = paramsToSubmit.elems[0].interval.length === 2 ? input_params.edate.slice(0, 7) : input_params.edate;\n\tparamsToSubmit.date = newDate;\n\n\t// areaDef is type (state, loc, bbox) and value of area of interest.\n\tif (input_params.areaDef.bbox) {\n\t\tinput_params.areaDef.bbox = input_params.areaDef.bbox.map(x => parseFloat(x))\n\t\tconst newbbox = checkBbox(input_params.areaDef.bbox);\n\t\tparamsToSubmit = {...paramsToSubmit, bbox: newbbox};\n\t\t//console.log(input_params.areaDef.bbox)\n\t} else if (input_params.areaDef.loc) {\n\t\tinput_params.areaDef.loc = input_params.areaDef.loc.map(x => parseFloat(x))\n\t\tconst newloc = checkLoc(input_params.areaDef.loc);\n\t\tparamsToSubmit = {...paramsToSubmit, loc: newloc};\n\t} else if (input_params.areaDef.state) {\n\t\tparamsToSubmit = {...paramsToSubmit, ...input_params.areaDef};\n\t} else {\n\t\tconsole.log(\"unknown areaDef\");\n\t}\n\t\n\t// point location can only be json\n\tif (paramsToSubmit.loc) {\n\t\tparamsToSubmit = {...paramsToSubmit, output: \"json\"};\n\t}\n\n\t// added image object if png output\n\tif (paramsToSubmit.output === 'png') {\n\t\tlet newImage = {...input_params.image};\n\t\t// convert levels string (from Image Settings) to array\n\t\tif (input_params.image.levels && typeof input_params.image.levels === 'string') {\n\t\t\tconst splitLevels = input_params.image.levels.split(\",\");\n\t\t\tconst newLevels = splitLevels.map(x => parseFloat(x));\n\t\t\tnewImage = {...newImage, levels: newLevels};\n\t\t}\n\t\t// leave off empty levels element\n\t\tif (input_params.image.hasOwnProperty('levels') && (input_params.image.levels === \"\" || input_params.image.levels.length === 0)) {\n\t\t\tdelete newImage.levels;\n\t\t\tdelete newImage.cmap;\n\t\t}\n\t\tif (input_params.image.hasOwnProperty('cmap') && input_params.image.cmap.length === 0) {\n\t\t\tdelete newImage.cmap;\n\t\t}\n\n\t\tparamsToSubmit = {...paramsToSubmit, image: newImage};\n\t}\n\n\treturn paramsToSubmit;\t\n};\n\n// download a retrieved png image\nconst downloadFile = (href, filename) => {\n\tconst link = document.createElement('a');\n\tlink.href = href;\n\tlink.download = filename;\n\tdocument.body.appendChild(link);\n\tlink.click();\n\tdocument.body.removeChild(link);\n};\n\n// retrieve and download a geotiff or json file\nconst downloadFetch = (jsonparams, filename, output) => {\n\tif (output === 'json') {\n\t\tdelete jsonparams.image;\n\t}\n\tconst submitParams = JSON.stringify({...jsonparams, output:output, meta:\"ll\"});\n\tfetch(\"https://grid2.rcc-acis.org/GridData\", {body: submitParams, method: \"POST\", headers: {'Content-Type': 'application/json'}})\n\t\t.then(response => {\n\t\t\tif (!response.ok) {\n\t\t\t\tconsole.log(\"Error fetching the results\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn output === 'json' ? response.json() : response.blob();\n\t\t})\n\t\t.then(response => {\n\t\t\tvar blob;\n\t\t\tif (output === 'json') {\n\t\t\t\tconst json = JSON.stringify(response);\n  \t\t\t\tblob = new Blob([json], {type:'application/json'});\n\t\t\t} else {\n\t\t\t\tblob = response;\n\t\t\t}\n\t\t\tconst href = window.URL.createObjectURL(blob);\n\t\t\tdownloadFile(href, filename)\n\t\t})\n\t\t.catch(err => {\n\t\t\tif (err.message.includes(\"Failed to execute 'createObjectURL' on 'URL'\")) {\n\t\t\t\tconsole.log(\"Invalid grid request - \"+jsonparams);\n\t\t\t} else {\n\t\t\t\tconsole.log(err.message);\n\t\t\t};\n\t\t});\n};\n\nexport { buildParams, checkBbox, downloadFile, downloadFetch };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}