{"ast":null,"code":"import { elements } from '../utilities/constants';\n\nconst dateDiff = (date1, date2) => {\n  const sdate = date1 instanceof Date ? date1 : new Date(date1);\n  const edate = date2 instanceof Date ? date2 : new Date(date2);\n  const one_day = 1000 * 60 * 60 * 24;\n  return Math.round((edate.getTime() - sdate.getTime()) / one_day);\n};\n\nconst buildParams = input_params => {\n  let paramsToSubmit = {\n    grid: input_params.grid,\n    output: input_params.output\n  };\n  console.log(input_params); // for debugging\n  // For \"interval\" date selection, calculate duration based on sdate and edate. Also send just date instead of sdate and edate.\n\n  const newElems = [...input_params.elems];\n\n  if (input_params.elems[0].duration !== 1) {\n    const mndiff = parseInt(input_params.edate.split(\"-\")[1]) - parseInt(input_params.sdate.split(\"-\")[1]);\n    const duration = mndiff + (mndiff >= 0 ? 1 : 13);\n    input_params.elems[0].duration = duration;\n    newElems[0] = { ...newElems[0],\n      duration\n    };\n  }\n\n  if (newElems[0].name === 'all') {\n    newElems[0] = { ...newElems[0],\n      name: 'maxt',\n      reduce: elements[0].reduce\n    };\n    ['mint', 'avgt', 'pcpn'].forEach((elem, i) => {\n      newElems.push({ ...newElems[0],\n        name: elem,\n        reduce: elements[i + 1].reduce\n      });\n    });\n  }\n\n  paramsToSubmit.elems = newElems;\n  const newDate = input_params.elems[0].interval.length === 2 ? input_params.edate.slice(0, 7) : input_params.edate;\n  paramsToSubmit.date = newDate; // areaDef is type (e.g. state, loc, county) and value of area of interest.\n\n  paramsToSubmit = { ...paramsToSubmit,\n    ...input_params.areaDef\n  }; // point location can only be json\n\n  if (paramsToSubmit.loc) {\n    paramsToSubmit = { ...paramsToSubmit,\n      output: \"json\"\n    };\n  }\n\n  return paramsToSubmit;\n};\n\nexport { buildParams };","map":{"version":3,"sources":["/Users/kle1/progs/React/normals-viewer/src/utilities/utils.js"],"names":["elements","dateDiff","date1","date2","sdate","Date","edate","one_day","Math","round","getTime","buildParams","input_params","paramsToSubmit","grid","output","console","log","newElems","elems","duration","mndiff","parseInt","split","name","reduce","forEach","elem","i","push","newDate","interval","length","slice","date","areaDef","loc"],"mappings":"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","sourcesContent":["import { elements } from '../utilities/constants';\n\nconst dateDiff = (date1, date2) => {\n\tconst sdate = date1 instanceof Date ? date1 : new Date(date1);\n\tconst edate = date2 instanceof Date ? date2 : new Date(date2);\n\tconst one_day = 1000 * 60 * 60 * 24;\n\treturn (Math.round((edate.getTime() - sdate.getTime()) / one_day));\n};\n\t\nconst buildParams = (input_params) => {\n\tlet paramsToSubmit = {grid: input_params.grid, output: input_params.output};\n\tconsole.log(input_params) // for debugging\n\t// For \"interval\" date selection, calculate duration based on sdate and edate. Also send just date instead of sdate and edate.\n\tconst newElems = [...input_params.elems];\n\tif (input_params.elems[0].duration !== 1) {\n\t\tconst mndiff = parseInt(input_params.edate.split(\"-\")[1]) - parseInt(input_params.sdate.split(\"-\")[1]);\n\t\tconst duration = mndiff + (mndiff >= 0 ? 1 : 13);\n\t\tinput_params.elems[0].duration = duration;\n\t\tnewElems[0] = {...newElems[0], duration};\n\t}\n\n\tif (newElems[0].name === 'all') {\n\t\tnewElems[0] = {...newElems[0], name: 'maxt', reduce: elements[0].reduce};\n\t\t['mint','avgt','pcpn'].forEach((elem,i) => {\n\t\t\tnewElems.push({...newElems[0], name:elem, reduce: elements[i+1].reduce});\n\t\t});\n\t}\n\tparamsToSubmit.elems = newElems;\n\t\n\tconst newDate = input_params.elems[0].interval.length === 2 ? input_params.edate.slice(0, 7) : input_params.edate;\n\tparamsToSubmit.date = newDate;\n\n\t// areaDef is type (e.g. state, loc, county) and value of area of interest.\n\tparamsToSubmit = {...paramsToSubmit, ...input_params.areaDef};\n\t\n\t// point location can only be json\n\tif (paramsToSubmit.loc) {\n\t\tparamsToSubmit = {...paramsToSubmit, output: \"json\"};\n\t}\n\n\treturn paramsToSubmit;\t\n};\n\nexport { buildParams };"]},"metadata":{},"sourceType":"module"}