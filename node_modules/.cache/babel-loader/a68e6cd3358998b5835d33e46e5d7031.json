{"ast":null,"code":"import _slicedToArray from\"/Users/kle1/progs/React/ncei-normals-mapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{MapContainer,TileLayer,Polygon,ImageOverlay}from'react-leaflet';import{makeStyles}from'@material-ui/core/styles';var useStyles=makeStyles(function(theme){return{nav:{position:\"absolute\",top:0,left:0,padding:\"3px\"},mapContainer:{border:\"1pt solid midnightblue\",height:window.innerHeight*0.6},rangeControl:{color:\"midnightblue\",paddingLeft:\"0.5em\"}};});var LeafletMap=function LeafletMap(props){var imgsrc=props.imgsrc,dataBbox=props.dataBbox,range=props.range;var _useState=useState(),_useState2=_slicedToArray(_useState,2),bbox=_useState2[0],setBbox=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),imgcoords=_useState4[0],setImgcoords=_useState4[1];var classes=useStyles();useEffect(function(){if(dataBbox){// setup bounding box (bounds)\nsetBbox([parseFloat(dataBbox[0]),parseFloat(dataBbox[1]),parseFloat(dataBbox[2]),parseFloat(dataBbox[3])]);// convert bbox to Leaflet coordinates (rectangle around image)\nsetImgcoords([[dataBbox[3],dataBbox[0]],[dataBbox[3],dataBbox[2]],[dataBbox[1],dataBbox[2]],[dataBbox[1],dataBbox[0]]]);}},[dataBbox]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.mapContainer,children:bbox&&/*#__PURE__*/_jsxs(MapContainer,{bounds:[[bbox[1],bbox[0]],[bbox[3],bbox[2]]],zoomControl:true,scrollWheelZoom:true,attributionControl:true,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors \\xA9 <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\"}),imgcoords&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Polygon,{pathOptions:{color:\"lightgray\",weight:1,fill:false},positions:imgcoords}),/*#__PURE__*/_jsx(\"div\",{className:\"leaflet-bottom leaflet-left\",children:/*#__PURE__*/_jsxs(\"span\",{className:classes.rangeControl,children:[\"Range: \",range[0].toFixed(2),\" to \",range[1].toFixed(2)]})})]}),imgcoords&&imgsrc&&/*#__PURE__*/_jsx(ImageOverlay,{url:imgsrc,bounds:imgcoords,opacity:0.8,zIndex:10})]})})});};export default LeafletMap;","map":{"version":3,"sources":["/Users/kle1/progs/React/ncei-normals-mapper/src/components/LeafletMap.js"],"names":["React","useEffect","useState","MapContainer","TileLayer","Polygon","ImageOverlay","makeStyles","useStyles","theme","nav","position","top","left","padding","mapContainer","border","height","window","innerHeight","rangeControl","color","paddingLeft","LeafletMap","props","imgsrc","dataBbox","range","bbox","setBbox","imgcoords","setImgcoords","classes","parseFloat","weight","fill","toFixed"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Polygon, ImageOverlay } from 'react-leaflet';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n\tnav: {\n\t\tposition: \"absolute\",\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tpadding: \"3px\",\n\t},\n\tmapContainer: {\n\t\tborder: \"1pt solid midnightblue\",\n\t\theight: window.innerHeight * 0.6,\n\t},\n\trangeControl: {\n\t\tcolor: \"midnightblue\",\n\t\tpaddingLeft: \"0.5em\",\n\t},\n}));\n\nconst LeafletMap = (props) => {\n\tconst { imgsrc, dataBbox, range } = props;\n\tconst [ bbox, setBbox ] = useState();\n\tconst [ imgcoords, setImgcoords ] = useState();\n\tconst classes = useStyles();\n\n\tuseEffect(() => {\n\t\tif (dataBbox) {\n\t\t\t// setup bounding box (bounds)\n\t\t\tsetBbox([parseFloat(dataBbox[0]),parseFloat(dataBbox[1]),parseFloat(dataBbox[2]),parseFloat(dataBbox[3])]);\n\t\t\t// convert bbox to Leaflet coordinates (rectangle around image)\n\t\t\tsetImgcoords([ [dataBbox[3],dataBbox[0]], [dataBbox[3],dataBbox[2]], [dataBbox[1],dataBbox[2]], [dataBbox[1],dataBbox[0]] ]);\n\t\t}\n\t}, [dataBbox]);\n\n\n\treturn (\n\t\t<>\n\t\t\t<div className={classes.mapContainer}>\n\t\t\t\t{bbox && \n\t\t\t\t\t<MapContainer \n\t\t\t\t\t\tbounds={[[bbox[1], bbox[0]], [bbox[3], bbox[2]]]}\n\t\t\t\t\t\tzoomControl={true}\n\t\t\t\t\t\tscrollWheelZoom={true}\n\t\t\t\t\t\tattributionControl={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\turl='https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png'\n\t\t\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{imgcoords &&\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Polygon \n\t\t\t\t\t\t\t\t\tpathOptions={{color:\"lightgray\", weight:1, fill:false}}\n\t\t\t\t\t\t\t\t\tpositions={imgcoords} \n\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t<div className='leaflet-bottom leaflet-left'>\n\t\t\t\t\t\t\t\t\t<span className={classes.rangeControl}>Range: {range[0].toFixed(2)} to {range[1].toFixed(2)}</span>\n    \t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{imgcoords && imgsrc &&\n\t\t\t\t\t\t\t<ImageOverlay\n\t\t\t\t\t\t\t\turl={imgsrc}\n\t\t\t\t\t\t\t\tbounds={imgcoords}\n\t\t\t\t\t\t\t\topacity={0.8}\n\t\t\t\t\t\t\t\tzIndex={10}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t</MapContainer>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default LeafletMap;\n"]},"metadata":{},"sourceType":"module"}